[![nuget](https://img.shields.io/nuget/vpre/SatorImaging.UnityAnalyzers)](https://www.nuget.org/packages/SatorImaging.UnityAnalyzers)
&nbsp;
[![ðŸ‡ºðŸ‡¸](https://img.shields.io/badge/ðŸ‡ºðŸ‡¸-English-68f)](./README.md)
[![ðŸ‡¯ðŸ‡µ](https://img.shields.io/badge/ðŸ‡¯ðŸ‡µ-æ—¥æœ¬èªž-68f)](./README.ja.md)
[![ðŸ‡¨ðŸ‡³](https://img.shields.io/badge/ðŸ‡¨ðŸ‡³-ç®€ä½“ä¸­æ–‡-68f)](./README.zh-CN.md)





Unity é–‹ç™ºæ™‚ã®ã‚³ãƒ¼ãƒ‰ã‚’å®‰å…¨ã‹ã¤æ­£ã—ãä¿ã¤ãŸã‚ã® Roslyn ã‚¢ãƒŠãƒ©ã‚¤ã‚¶ãƒ¼ã§ã™ã€‚

- [éžåŒæœŸãƒ¡ã‚½ãƒƒãƒ‰ã®è§£æž](#éžåŒæœŸãƒ¡ã‚½ãƒƒãƒ‰ã®è§£æž)
  - [SIUA001](#siua001-ä¿¡é ¼ã§ããªã„-unity-ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚¢ã‚¯ã‚»ã‚¹): ä¿¡é ¼ã§ããªã„ Unity ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚¢ã‚¯ã‚»ã‚¹
  - [SIUA002](#siua002-å®‰å…¨ãƒ–ãƒ­ãƒƒã‚¯å†…ã§ã®-await): å®‰å…¨ãƒ–ãƒ­ãƒƒã‚¯å†…ã§ã® await
- [é™çš„çŠ¶æ…‹ã®è§£æž](#é™çš„çŠ¶æ…‹ã®è§£æž)
  - [SIUA011](#siua011-é™çš„çŠ¶æ…‹ãŒãƒ—ãƒ¬ã‚¤ãƒ¢ãƒ¼ãƒ‰ã‚’è·¨ã„ã§æ®‹ã£ã¦ã„ã‚‹): é™çš„çŠ¶æ…‹ãŒãƒ—ãƒ¬ã‚¤ãƒ¢ãƒ¼ãƒ‰ã‚’è·¨ã„ã§æ®‹ã£ã¦ã„ã‚‹
  - [SIUA012](#siua012-runtimeinitializeonloadmethod-ã§ã®çŠ¶æ…‹ãƒªã‚»ãƒƒãƒˆæ¼ã‚Œ): RuntimeInitializeOnLoadMethod ã§ã®çŠ¶æ…‹ãƒªã‚»ãƒƒãƒˆæ¼ã‚Œ
  - [SIUA013](#siua013-ãƒœãƒ‡ã‚£ã‚’æŒã¤é™çš„ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒä¸æ­£ãªçŠ¶æ…‹ã‚’è¿”ã™å¯èƒ½æ€§ãŒã‚ã‚‹): ãƒœãƒ‡ã‚£ã‚’æŒã¤é™çš„ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒä¸æ­£ãªçŠ¶æ…‹ã‚’è¿”ã™å¯èƒ½æ€§ãŒã‚ã‚‹





# éžåŒæœŸãƒ¡ã‚½ãƒƒãƒ‰ã®è§£æž

`UnityAsyncMethodAnalyzer` ã¯ `async` ãƒ¡ã‚½ãƒƒãƒ‰å†…ã§ã® `UnityEngine.Object`ï¼ˆMonoBehaviourã€ScriptableObject ãªã©ï¼‰ã®å®‰å…¨ãªåˆ©ç”¨ã‚’æ¤œè¨¼ã—ã¾ã™ã€‚

`MonoBehaviour` ã‚„ Unity å›ºæœ‰ã®åž‹ã ã‘ã§ãªãã€é€šå¸¸ã® C# ã‚¯ãƒ©ã‚¹ãƒ»æ§‹é€ ä½“ãƒ»ãƒ¬ã‚³ãƒ¼ãƒ‰ã«å®£è¨€ã•ã‚ŒãŸã™ã¹ã¦ã® `async` ãƒ¡ã‚½ãƒƒãƒ‰ãŒå¯¾è±¡ã§ã™ã€‚

## `SIUA001`: ä¿¡é ¼ã§ããªã„ Unity ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚¢ã‚¯ã‚»ã‚¹

**é‡å¤§åº¦: Error**

`async` ãƒ¡ã‚½ãƒƒãƒ‰å†…ã§ Unity ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãƒ¡ãƒ³ãƒãƒ¼ï¼ˆãƒ¡ã‚½ãƒƒãƒ‰ãƒ»ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãƒ»ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãƒ»ã‚¤ãƒ™ãƒ³ãƒˆï¼‰ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã®ã¯å±é™ºã§ã™ã€‚ãƒã‚¤ãƒ†ã‚£ãƒ–ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒç ´æ£„ã•ã‚ŒãŸå¾Œã‚‚ãƒžãƒãƒ¼ã‚¸ãƒ‰å´ã¯ç”Ÿãã¦ã„ã‚‹å ´åˆãŒã‚ã‚‹ãŸã‚ã§ã™ã€‚

**ãƒ«ãƒ¼ãƒ«:**
`if (obj != null)` ã®ã‚ˆã†ãªåŽ³å¯†ãª null ãƒã‚§ãƒƒã‚¯ã§ã‚¬ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„ã€‚

**ãƒžãƒƒãƒç†ç”±:**
- `UnityEngine.Object` æ´¾ç”Ÿåž‹ã®ä»»æ„ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãƒ¡ãƒ³ãƒãƒ¼ã‚¢ã‚¯ã‚»ã‚¹ã€‚
- `?.` æ¼”ç®—å­ï¼ˆä¾‹: `obj?.Prop`ï¼‰ã¯ Unity ã®ç”Ÿå­˜ãƒã‚§ãƒƒã‚¯ã‚’å›žé¿ã™ã‚‹ãŸã‚ **å®‰å…¨ã§ã¯ã‚ã‚Šã¾ã›ã‚“**ã€‚

**å®‰å…¨ãªãƒ‘ã‚¿ãƒ¼ãƒ³:**
```csharp
if (unityObject != null)
{
    unityObject.DoSomething(); // OK
}
```

**å±é™ºãªãƒ‘ã‚¿ãƒ¼ãƒ³:**
```csharp
await Task.Yield();

unityObject.DoSomething(); // Error: SIUA001
unityObject?.DoSomething(); // Error: SIUA001 (?. ã¯ãƒã‚¤ãƒ‘ã‚¹æ‰±ã„)
```

**æœ€åˆã® await ã®ä¾‹å¤–:**

æœ€åˆã® `await` å‰ã€ãŠã‚ˆã³ã€Œæœ€åˆã® await å¼ã®å†…éƒ¨ã€ã§ã® Unity ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚¢ã‚¯ã‚»ã‚¹ã¯å®‰å…¨ã§ã€SIUA001 ã¯ç™ºç”Ÿã—ã¾ã›ã‚“ã€‚

```csharp
// å®‰å…¨: await å‰
unityObject.DoSomething();

// å®‰å…¨: æœ€åˆã® await å¼ã®å†…éƒ¨
await unityObject.SomeAsyncMethod();

// ã‚¨ãƒ©ãƒ¼: æœ€åˆã® await å®Œäº†å¾Œ
unityObject.DoSomethingElse(); // Error: SIUA001
```

ã“ã‚Œã¯ã€`async` ãƒ¡ã‚½ãƒƒãƒ‰ãŒåˆã‚ã¦åˆ¶å¾¡ã‚’æ‰‹æ”¾ã™ã¾ã§ã¯ Unity ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒç ´æ£„ã•ã‚Œãªã„ãŸã‚ã§ã™ã€‚

## `SIUA002`: å®‰å…¨ãƒ–ãƒ­ãƒƒã‚¯å†…ã§ã® await

**é‡å¤§åº¦: Warning**

"å®‰å…¨ãƒ–ãƒ­ãƒƒã‚¯"ï¼ˆ`if (obj != null)` ãƒ–ãƒ­ãƒƒã‚¯ï¼‰å†…ã§ `await` ã‚’ä½¿ã†ã¨å®‰å…¨æ€§ãŒå¤±ã‚ã‚Œã¾ã™ã€‚`await` å¾Œã«å†é–‹ã—ãŸæ™‚ç‚¹ã§ Unity ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒç ´æ£„ã•ã‚Œã¦ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ãŸã‚ã§ã™ã€‚

**ãƒ«ãƒ¼ãƒ«:**
Unity ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã® null ãƒã‚§ãƒƒã‚¯ã§ã‚¬ãƒ¼ãƒ‰ã•ã‚ŒãŸãƒ–ãƒ­ãƒƒã‚¯å†…ã§ã¯ `await` ã‚’ä½¿ç”¨ã—ãªã„ã§ãã ã•ã„ã€‚

**å±é™ºãªãƒ‘ã‚¿ãƒ¼ãƒ³:**
```csharp
if (unityObject != null)
{
    await Task.Delay(100);

    // å†é–‹æ™‚ã«ã¯ç ´æ£„ã•ã‚Œã¦ã„ã‚‹ã‹ã‚‚ã—ã‚Œãªã„
    unityObject.DoSomething(); 
}
// Warning: SIUA002 ã¯ 'await' ã«å ±å‘Šã•ã‚Œã‚‹
```

**æ­£ã—ã„ãƒ‘ã‚¿ãƒ¼ãƒ³:**
ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«ã‚¢ã‚¯ã‚»ã‚¹ã—ãŸã„å ´åˆã€`await` ã®å¾Œã§ null ãƒã‚§ãƒƒã‚¯ã‚’è¡Œã£ã¦ãã ã•ã„ã€‚

```csharp
await Task.Delay(100);

if (unityObject != null)
{
    unityObject.DoSomething();
}
```

---

## å…±é€šã®è§£æžæŒ™å‹•

ä»¥ä¸‹ã®ãƒ«ãƒ¼ãƒ«ã¨åˆ¶é™ã¯ `UnityAsyncMethodAnalyzer` ã®å…¨è¨ºæ–­ã«é©ç”¨ã•ã‚Œã¾ã™ã€‚

### å®‰å…¨ãƒ–ãƒ­ãƒƒã‚¯ã®å®šç¾©ï¼ˆåŽ³å¯†ã•ï¼‰

ã‚¢ãƒŠãƒ©ã‚¤ã‚¶ãƒ¼ã¯ã€Œå®‰å…¨ãƒ–ãƒ­ãƒƒã‚¯ã€ã‚’åŽ³å¯†ã«åˆ¤å®šã—ã¾ã™ã€‚
- `if` æ¡ä»¶å†…ã® **ã™ã¹ã¦** ãŒ Unity ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã® null ãƒã‚§ãƒƒã‚¯ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
- Unity ãƒã‚§ãƒƒã‚¯ã« **ä»–ã®æ¡ä»¶ã‚’1ã¤ã§ã‚‚** çµ„ã¿åˆã‚ã›ã‚‹ã¨ï¼ˆ`unityObj != null && someBool` ãªã©ï¼‰ã€ãã®ãƒ–ãƒ­ãƒƒã‚¯ã¯ **å®‰å…¨ã§ã¯ãªã„** ã¨ã¿ãªã•ã‚Œã¾ã™ã€‚
- åŸºæœ¬çš„ã« `if` æ–‡ã®ã¿ã‚’è¨±å®¹ã—ã€ä¸‰é …æ¼”ç®—å­ï¼ˆ`? :`ï¼‰ã¯é€šå¸¸ã‚µãƒãƒ¼ãƒˆã—ã¾ã›ã‚“ã€‚
- æ¡ä»¶ã¯ `x != null` ã®ã‚ˆã†ãªç›´æŽ¥ã®ä¸ç­‰å¼ã€ã‚‚ã—ãã¯ãã‚Œã‚‰ã‚’ `&&`ï¼ˆè«–ç†ç©ï¼‰ã§æ§‹æˆã—ãŸã‚‚ã®ã«é™ã‚Šã¾ã™ã€‚
- **è¤‡é›‘ãªæ¡ä»¶**ï¼ˆ`||`ã€`is not null` ã¨ã„ã£ãŸãƒ‘ã‚¿ãƒ¼ãƒ³ãƒžãƒƒãƒã€ãƒ˜ãƒ«ãƒ‘ãƒ¼ãƒ¡ã‚½ãƒƒãƒ‰ãªã©ï¼‰ã¯ **èª¤æ¤œå‡º**ï¼ˆå®‰å…¨ã§ãªã„æ‰±ã„ï¼‰ã•ã‚Œã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚

### åˆ¶é™: ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼è§£æžãªã—

ã‚¢ãƒŠãƒ©ã‚¤ã‚¶ãƒ¼ã¯ãƒã‚§ãƒƒã‚¯å¯¾è±¡ã®å¤‰æ•°ã¨ä½¿ç”¨ã—ã¦ã„ã‚‹å¤‰æ•°ãŒä¸€è‡´ã™ã‚‹ã‹ã‚’æ¤œè¨¼ã—ã¾ã›ã‚“ã€‚**æœ‰åŠ¹ãª Unity ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ null ãƒã‚§ãƒƒã‚¯ãŒè¦‹ã¤ã‹ã£ãŸãƒ–ãƒ­ãƒƒã‚¯** ã‚’ä¸¸ã”ã¨ã€Œå®‰å…¨ã€ã¨è¦‹ãªã—ã¾ã™ã€‚

**SIUA001 ã¸ã®å½±éŸ¿:**
ãƒ–ãƒ­ãƒƒã‚¯å†…ã®è§£æžã‚’ã‚¹ã‚­ãƒƒãƒ—ã™ã‚‹ãŸã‚ã€ãƒã‚§ãƒƒã‚¯ã¨ã¯åˆ¥ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½¿ã£ã¦ã„ã¦ã‚‚å ±å‘Šã—ã¾ã›ã‚“ã€‚

```csharp
// æœ‰åŠ¹ï¼ˆè§£æžã‚¹ã‚­ãƒƒãƒ—ï¼‰
// Unity ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ 'foo' ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ã„ã‚‹ãŸã‚ãƒ–ãƒ­ãƒƒã‚¯ã¯ã€Œå®‰å…¨ã€ã¨åˆ¤å®šã•ã‚Œã‚‹ã€‚
// å®Ÿéš›ã«ã¯ 'bar' ã‚’ãƒã‚§ãƒƒã‚¯ãªã—ã§ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ã„ã¦ã‚‚ã‚¨ãƒ©ãƒ¼ã«ãªã‚‰ãªã„ï¼ˆå½é™°æ€§ï¼‰ã€‚
if (foo != null) 
{
    bar.DoSomething(); // No Error (False negative)
}
```

**SIUA002 ã¸ã®å½±éŸ¿:**
ãƒã‚§ãƒƒã‚¯å¯¾è±¡ã¨ await å¯¾è±¡ãŒç„¡é–¢ä¿‚ã§ã‚‚ã€ãƒ–ãƒ­ãƒƒã‚¯å†…ã® `await` ã‚’åŽ³æ ¼ã«ç¦æ­¢ã—ã¾ã™ã€‚

```csharp
// Warningï¼ˆåŽ³æ ¼é©ç”¨ï¼‰
if (foo != null) 
{
    await Task.Delay(10); // Warning: SIUA002
}
```

### åˆ¶é™: æ—©æœŸãƒªã‚¿ãƒ¼ãƒ³

ã‚¢ãƒŠãƒ©ã‚¤ã‚¶ãƒ¼ã¯åˆ¶å¾¡ãƒ•ãƒ­ãƒ¼è§£æžã‚’è¡Œã‚ãªã„ãŸã‚ã€ã€Œæ—©æœŸãƒªã‚¿ãƒ¼ãƒ³ã€ã‚¹ã‚¿ã‚¤ãƒ«ã®ãƒã‚§ãƒƒã‚¯ã¯å®‰å…¨ãƒ–ãƒ­ãƒƒã‚¯ã¨ã—ã¦æ‰±ã‚ã‚Œã¾ã›ã‚“ã€‚

**å›žé¿ç­–:**
æ¡ä»¶ã‚’åè»¢ã—ã¦ `else` ãƒ–ãƒ­ãƒƒã‚¯ã‚’ç”¨ã„ã‚‹ï¼ˆã¾ãŸã¯ä¸­ã«ã‚³ãƒ¼ãƒ‰ã‚’å…¥ã‚Œã‚‹ï¼‰ã€‚

```csharp
// å±é™ºï¼ˆã“ã®å½¢ã¯ã‚µãƒãƒ¼ãƒˆã•ã‚Œãªã„ï¼‰
if (unityObject == null) return;

unityObject.DoSomething(); // Error: SIUA001
```

```csharp
// å®‰å…¨ï¼ˆelse ãƒ–ãƒ­ãƒƒã‚¯ã‚’ä½¿ç”¨ï¼‰
if (unityObject != null)
{
    unityObject.DoSomething(); // OK
}
else
{
    return;
}
```

ã“ã®å›žé¿ç­–ã¯ **SIUA002** ã«ã‚‚å½“ã¦ã¯ã¾ã‚Šã¾ã™ã€‚

```csharp
// å±é™ºï¼ˆawait ãŒ if å†…ã«ã‚ã‚‹ãŸã‚ SIUA002 ãŒç™ºç”Ÿï¼‰
if (unityObject != null)
{
    unityObject.DoSomething();
    await DoFurtherAsync(); // Warning: SIUA002
}
```

```csharp
// å®‰å…¨ï¼ˆawait ã‚’ãƒã‚§ãƒƒã‚¯ãƒ–ãƒ­ãƒƒã‚¯ã®å¤–ã«å‡ºã™ï¼‰
if (unityObject != null)
{
    unityObject.DoSomething();
}
else
{
    return;
}

await DoFurtherAsync(); // OK
```

# é™çš„çŠ¶æ…‹ã®è§£æž

`UnityStaticStateAnalyzer` ã¯ã€ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒªãƒ­ãƒ¼ãƒ‰ãŒç„¡åŠ¹ã«ãªã£ã¦ã„ã‚‹å ´åˆã«é™çš„çŠ¶æ…‹ãŒãƒ—ãƒ¬ã‚¤ãƒ¢ãƒ¼ãƒ‰ã‚’è·¨ã„ã§æ®‹ã‚‰ãªã„ã“ã¨ã‚’ç¢ºèªã—ã¾ã™ã€‚

![](./docs/UnityStaticStateAnalyzer.gif)

## `SIUA011`: é™çš„çŠ¶æ…‹ãŒãƒ—ãƒ¬ã‚¤ãƒ¢ãƒ¼ãƒ‰ã‚’è·¨ã„ã§æ®‹ã£ã¦ã„ã‚‹

**é‡å¤§åº¦: Error**

Unity ã§ã¯ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒªãƒ­ãƒ¼ãƒ‰ãŒç„¡åŠ¹ã«ãªã£ã¦ã„ã‚‹å ´åˆã€é™çš„ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚„ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¯ãƒ—ãƒ¬ã‚¤ãƒ¢ãƒ¼ãƒ‰ã‚’è·¨ã„ã§ä¿æŒã•ã‚Œã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€å‰ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®çŠ¶æ…‹ãŒæ¬¡ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ã«å¼•ãç¶™ãŒã‚Œã€äºˆæœŸã—ãªã„å‹•ä½œã‚’å¼•ãèµ·ã“ã™å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚

**ãƒ«ãƒ¼ãƒ«:**
é™çš„ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚„ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¯ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ­ãƒ¼ãƒ‰æ™‚ã‚„ãƒ—ãƒ¬ã‚¤ãƒ¢ãƒ¼ãƒ‰ã¸ã®é€²å…¥æ™‚ã«ãƒªã‚»ãƒƒãƒˆã•ã‚Œã‚‹ã¹ãã§ã™ã€‚ã“ã‚Œã¯é€šå¸¸ã€`[RuntimeInitializeOnLoadMethod]` å±žæ€§ãŒä»˜ã„ãŸãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ç”¨ã—ã¦è¡Œã‚ã‚Œã¾ã™ã€‚

**ãƒžãƒƒãƒç†ç”±:**
- é™çš„ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ï¼ˆ`const` ãŠã‚ˆã³ `string`ã€ãƒ—ãƒªãƒŸãƒ†ã‚£ãƒ–åž‹ã€`readonly struct` ãªã©ã®ä¸å¤‰åž‹ã® `readonly` ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’é™¤ãï¼‰ã€‚
- é™çš„ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ï¼ˆä¸å¤‰åž‹ã®ã‚²ãƒƒã‚¿ãƒ¼ã®ã¿ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’é™¤ãï¼‰ã€‚
- ã‚¯ãƒ©ã‚¹å†…ã« `[RuntimeInitializeOnLoadMethod]` ã¾ãŸã¯ `[RuntimeInitializeOnLoadMethodAttribute]` ãŒä»˜ã„ãŸé™çš„ãƒ¡ã‚½ãƒƒãƒ‰ãŒå­˜åœ¨ã—ãªã„ã€‚

**å®‰å…¨ãªãƒ‘ã‚¿ãƒ¼ãƒ³:**
```csharp
public class MyService
{
    public static int Counter;

    [RuntimeInitializeOnLoadMethod(RuntimeInitializeLoadType.SubsystemRegistration)]
    static void Init()
    {
        Counter = 0;
    }
}
```

**å±é™ºãªãƒ‘ã‚¿ãƒ¼ãƒ³:**
```csharp
public class MyService
{
    public static int Counter; // Error: SIUA011
}
```

## `SIUA012`: RuntimeInitializeOnLoadMethod ã§ã®çŠ¶æ…‹ãƒªã‚»ãƒƒãƒˆæ¼ã‚Œ

**é‡å¤§åº¦: Error**

ãƒªã‚»ãƒƒãƒˆãŒå¿…è¦ãªé™çš„ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã€ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã€ã‚¤ãƒ™ãƒ³ãƒˆï¼ˆSIUA011 å‚ç…§ï¼‰ã¯ã€`[RuntimeInitializeOnLoadMethod]` å±žæ€§ãŒä»˜ã„ãŸãƒ¡ã‚½ãƒƒãƒ‰å†…ã§æ˜Žç¤ºçš„ã«å€¤ã‚’ä»£å…¥ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

**ãƒ«ãƒ¼ãƒ«:**
ã‚¯ãƒ©ã‚¹å†…ã®ã™ã¹ã¦ã®å¯å¤‰ã®é™çš„çŠ¶æ…‹ã¯ã€åˆæœŸåŒ–ãƒ¡ã‚½ãƒƒãƒ‰å†…ã§å˜ç´”ãªä»£å…¥ï¼ˆ`=`ï¼‰ã«ã‚ˆã£ã¦ãƒªã‚»ãƒƒãƒˆã•ã‚Œãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã€‚

**å±é™ºãªãƒ‘ã‚¿ãƒ¼ãƒ³:**
```csharp
public class MyService
{
    public static int Counter;
    public static string Status;

    [RuntimeInitializeOnLoadMethod]
    static void Init()
    {
        Counter = 0;
        // Status ãŒãƒªã‚»ãƒƒãƒˆã•ã‚Œã¦ã„ãªã„ï¼ -> Error: SIUA012 ãŒ 'Init' ã«å ±å‘Šã•ã‚Œã‚‹
    }
}
```

## `SIUA013`: ãƒœãƒ‡ã‚£ã‚’æŒã¤é™çš„ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒä¸æ­£ãªçŠ¶æ…‹ã‚’è¿”ã™å¯èƒ½æ€§ãŒã‚ã‚‹

**é‡å¤§åº¦: Warning**

ã‚²ãƒƒã‚¿ãƒ¼ãƒœãƒ‡ã‚£ã‚’æŒã¤ï¼ˆè‡ªå‹•å®Ÿè£…ã•ã‚Œã¦ã„ãªã„ï¼‰é™çš„ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¯ã€ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒªãƒ­ãƒ¼ãƒ‰ãŒç„¡åŠ¹ã«ãªã£ã¦ã„ã‚‹å ´åˆã«ã€ä¸æ­£ãªã€ã‚ã‚‹ã„ã¯å¤ã„é™çš„çŠ¶æ…‹ã‚’è¿”ã™å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚

**ãƒ«ãƒ¼ãƒ«:**
è‡ªå‹•å®Ÿè£…ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®ä½¿ç”¨ã‚’æ¤œè¨Žã™ã‚‹ã‹ï¼ˆä¾‹: `static int Property { get; } = 0;`ï¼‰ã€è¿”ã•ã‚Œã‚‹å€¤ãŒæ­£ã—ãç®¡ç†ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚

**ãƒžãƒƒãƒç†ç”±:**
- è‡ªå‹•å®Ÿè£…ã•ã‚Œã¦ã„ãªã„ï¼ˆãƒœãƒ‡ã‚£ã¾ãŸã¯å¼å½¢å¼ã®ãƒœãƒ‡ã‚£ã‚’æŒã¤ï¼‰ä»»æ„ã®é™çš„èª­ã¿å–ã‚Šå°‚ç”¨ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã€‚
- ã‚¯ãƒ©ã‚¹å†…ã« `[RuntimeInitializeOnLoadMethod]` ãŒä»˜ã„ãŸé™çš„ãƒ¡ã‚½ãƒƒãƒ‰ãŒå­˜åœ¨ã—ãªã„ã€‚

**å±é™ºãªãƒ‘ã‚¿ãƒ¼ãƒ³:**
```csharp
public class MyService
{
    // Warning: SIUA013
    public static int Counter => 123;
}
```

**å®‰å…¨ãªãƒ‘ã‚¿ãƒ¼ãƒ³:**
```csharp
public class MyService
{
    public static int Counter { get; } = 123;
}
```

> [!TIP]
> `Directory.Build.props` ãªã©ã®å…±æœ‰è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã§ã‚¢ãƒŠãƒ©ã‚¤ã‚¶ãƒ¼ã‚’å‚ç…§ã™ã‚‹å ´åˆã€C# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒ Unity ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã‚ã‚‹å ´åˆã®ã¿æœ‰åŠ¹ã«ã™ã‚‹ã«ã¯ã€ä»¥ä¸‹ã®æ¡ä»¶ï¼ˆConditionï¼‰ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚
> `Condition=" $([System.String]::Copy('$(DefineConstants)').IndexOf('UNITY_5_6_OR_NEWER')) != -1 "`
>
> **`.props` ãƒ•ã‚¡ã‚¤ãƒ«ã®å…¨ä½“ã‚µãƒ³ãƒ—ãƒ«:**
> ```xml
> <Project>
>
>     <!-- UnityAnalyzers -->
>     <ItemGroup Condition=" $([System.String]::Copy('$(DefineConstants)').IndexOf('UNITY_5_6_OR_NEWER')) != -1 ">
>         <PackageReference Include="SatorImaging.UnityAnalyzers" Version="*-*">
>             <PrivateAssets>all</PrivateAssets>
>             <IncludeAssets>runtime; build; native; contentfiles; analyzers</IncludeAssets>
>         </PackageReference>
>     </ItemGroup>
>
> </Project>
> ```
